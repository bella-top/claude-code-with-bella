# Claude Code让AI编程真正落地

## 分享目的
- 了解Claude Code能帮我们解决哪些实际编程问题
- 深入理解Claude Code的核心优势和设计理念
- 掌握Claude Code的最佳实践和高效使用方法

## AI Coding的最终选择：Claude Code

### 为什么关注AI Coding

- 研发同学日常核心工作就是coding，编程效率提升直接转化为工作价值。
- Coding是一个相对标准化的垂直领域，有明确的语法规则和逻辑结构。这个领域的问题更容易用AI解决。
- Coding工作输入输出明确：需求→代码的映射相对清晰
- 以上原因促使AI Coding市场很活跃，工具已经相对成熟，学习成本最低。

###  我的AI Coding探索经历

- Windsurf最早期用户：早期的windsurf在当时很惊艳，UI体验、coding质量、价格都不错，但是初期出现执行异常的情况略多，复杂任务的理解一般，并且后来价格提高
- Bella开源生态建设，期望AI解决社区issues，调研开源的AI-coding项目gpt-engineer,continue.dev,MetaGPT等
- 在调研众多开源项目的基础上，实现了bella-issues-bot专注于解决GitHub社区的issues
- google推出Jules，免费且基于planning，擅长解决复杂问题，执行时间很长，但是从中体会了异步编程的理念

### Claude Code的使用体验好在哪里？
- 对复杂问题的理解性更好，执行速度比Jules快
- 生成的代码风格与整个项目更一致
- 执行过程中的容错率更高，几乎不会出现执行异常导致本次任务失败的请情况
- 既有cli支持本地开发，又集成了GitHub的code review和issues处理等功能
- 生成的代码准确率高，几乎在不修改的情况下都可以直接执行
- 可以直接集成公司的统一网关Bella-Openapi，用量限制更小，内部团队使用也不需要额外的采购流程

### Bella Openapi在Claude Code的集成上做了什么？
- 实现了Claude Code依赖的 `/v1/messsages` 接口
- 所有在Bella-Openapi中接入的LLM协议均可使用Claude Code，不仅仅支持Claude系列模型，同时支持了Openai全系列、Gemini、DeepSeek、Qwen、Doubao等主流模型。
- 可以为Claude Code使用单独的Apikey，控制成本，且每次请求产生的费用开销在日志中清晰可见
- 企业级用户可以在使用统一网关的同时，享受最强Code Agent的全部特性

## 快速使用

### 本地coding
[Claude-Code-Cli快速使用攻略](../../README.md)

### GitHub集成
[Claude-Code-GitHub快速集成攻略](../../README_GITHUB_ACTION.md)

## 让Claude Code更好地为你工作

### 如何分解任务

**按复杂度分层**
- **简单任务**：单文件修改、bug修复、代码格式化
    - 直接描述问题和期望结果
    - 例：`修复这个空指针异常，在user为null时返回默认值`

- **中等任务**：功能实现、API开发、测试编写
    - 描述功能需求和约束条件
    - 提供相关的数据结构和接口定义
    - 例：`实现用户登录接口，支持邮箱和手机号，返回JWT token`

- **复杂任务**：架构重构、系统集成、性能优化
    - 分解为多个独立的子任务
    - 明确各模块间的依赖关系
    - 提供系统整体的上下文信息

**任务分解的最佳实践**
1. **单一职责**：每个任务只专注一个核心功能
2. **可验证**：任务完成后有明确的验证标准
3. **有边界**：明确哪些文件和模块会被影响
4. **递进式**：从基础功能到复杂特性逐步推进

### 哪些任务适合交给它

**✅ 高度适合的任务**
- **代码生成**：根据需求文档生成业务逻辑代码
- **Bug修复**：根据错误信息和堆栈追踪修复问题
- **测试编写**：为现有代码生成单元测试和集成测试
- **代码重构**：优化代码结构，提高可读性和可维护性
- **API实现**：根据接口定义实现后端服务
- **数据处理**：编写数据转换、清洗、分析脚本

**⚠️ 需要谨慎的任务**
- **架构设计**：需要人工review和决策
- **安全相关代码**：需要额外的安全审查
- **系统性能相关的代码**：需要性能测试验证
- **第三方集成**：需要详细明确的文档以及实际调试和联调

**❌ 不适合的任务**
- **需求分析**：需要业务理解和用户交互
- **技术选型**：需要综合考虑团队、项目、成本等因素
- **生产环境操作**：需要人工确认和监控

### 使用者需要具备哪些能力
- **系统设计能力**：对整体架构和模块关系有清晰认知，能够合理分解任务
- **代码Review能力**：能够识别生成代码的问题，包括逻辑错误、性能问题、安全隐患
- **Debug能力**：当生成的代码出现问题时，能够快速定位和修复
- **需求理解能力**：能够将模糊的业务需求转化为清晰的技术实现要求
- **工程实践经验**：了解项目的编码规范、测试要求、部署流程等

**要求不那么高的能力**
- 对某种编程语言或框架的熟悉程度

### 高效使用技巧

**提示词优化**
- 提供清晰的上下文：项目背景、技术栈、相关文件
- 使用具体的例子说明期望的行为
- 明确约束条件：性能要求、兼容性、编码规范

**迭代式开发**
- 从MVP版本开始，逐步完善功能
- 每次迭代验证结果，及时调整方向
- 充分利用Claude Code的上下文记忆能力

### 案例分享
[Lark文档解析支持文件删除Issues](https://github.com/LianjiaTech/bella-openapi/issues/117)

**背景**：实现文档解析服务的任务管理，支持文件删除功能

**实现过程**：
1. **初版实现**：Claude Code使用数据库实现任务管理
    - 功能完整，但引入了额外的存储依赖
    - 对于简单场景过于重量级

2. **优化方向**：基于反馈，改为内存实现
    - 降低系统复杂度，减少外部依赖
    - 提高响应速度，简化部署

3. **问题识别**：内存方案存在服务重启丢失任务的风险
    - 方案一：优雅关闭，等待任务完成（影响发布速度）
    - 方案二：引入Redis持久化（平衡性能和可靠性）

4. **最终实现**：选择Redis方案，Claude Code快速完成实现
    - 既保证了任务的持久性，又不影响服务发布流程
    - 代码质量高，几乎无需修改直接可用

**经验总结**：
- Claude Code能够理解复杂的业务逻辑和技术权衡
- 通过多轮对话，能够不断优化方案
- 生成的代码质量高，符合项目整体风格

## 深入理解Claude Code为什么更好

### Agent设计理念
[Claude Code的单Agent设计](../../agent_design.md)


### 合理的codebase管理
[Claude Code与Cursor的codebase对比](../../codebase_Cursor_vs_Claude.md)


## 立即行动
- 根据[教程](../../README.md)安装配置Claude Code，本地体验提出问题，
- 为支持项目：[ClaudeCode集成Bella](https://github.com/bella-top/claude-code-with-bella)，[Bella Openapi](https://github.com/LianjiaTech/bella-openapi)点赞

## Q&A和讨论
**核心观点总结**
- Claude Code对比其他AI Coding工具，在综合能力和全面性上优势明显
- 用好AI Coding工具，也需要优秀的软件工程师素养
- Claude Code的优秀能力，除了模型能力带来的显著提升外，与它的Agent设计理念以及codebase设计密不可分
